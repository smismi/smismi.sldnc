<!DOCTYPE html>
<html class="no-js" lang="ru">


<head>
	<meta charset="utf-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="viewport" content="width=500" />

	<title>СЛДНЦ</title>

	<script type="text/javascript" src="js/modernizr.custom.13938-min.js"></script>



	<script type="text/javascript" src="js/_dependent/greensock/TweenMax.min.js"></script>
	<script type="text/javascript" src="js/_dependent/jquery-1.11.0.min.js"></script>
	<script type="text/javascript" src="js/jquery.scrollmagic.js"></script>
	<script type="text/javascript" src="js/jquery.scrollmagic.debug.js"></script>
	<script type="text/javascript" src="js/_mobile/iscroll.js"></script>
	<script type="text/javascript" src="js/jquery.scrollto.js"></script>




	<link rel="stylesheet" href="css/fontface.css" type="text/css"/>
	<link rel="stylesheet" href="css/common.css" type="text/css"/>
</head>
<body>
<ul id="menu"></ul>



<div id="content-wrapper">
	<div id="wrapper">
		<nav class="header fixed">
			<ul class="header_nav" id="header">
				<li class="header_nav_item"><a class="header_nav_item_link" href="#1">Кaмпания</a></li>
				<li class="header_nav_item"><a class="header_nav_item_link" href="#2">Каталог</a></li>
				<li class="header_nav_item"><a class="header_nav_item_link" href="#3">Партнеры</a></li>
				<li class="header_nav_item"><a class="header_nav_item_link" href="#4">Новости</a></li>
				<li class="header_nav_item"><a class="header_nav_item_link" href="#5">Контакты</a></li>
			</ul>
		</nav>
		<nav class="pager fixed">
			<ul class="pager_nav" id="nav">
				<li class="pager_nav_item"><a class="pager_nav_item_link" href="#section-1">1</a></li>
				<li class="pager_nav_item"><a class="pager_nav_item_link" href="#section-2">2</a></li>
				<li class="pager_nav_item"><a class="pager_nav_item_link" href="#section-3">3</a></li>
				<li class="pager_nav_item"><a class="pager_nav_item_link" href="#section-4">4</a></li>
				<li class="pager_nav_item"><a class="pager_nav_item_link" href="#section-5">5</a></li>
			</ul>
		</nav>


		<div class="scrollContent">

			<section id="section-4" class="page page4">
				<div class="wrapper">
					<div class="section-4-bg-4" data-speed="4"></div>
					<div class="section-4-bg-3" data-speed="3"></div>
					<div class="section-4-bg-2" data-speed="2"></div>
					<div class="section-4-bg-1" data-speed="1"></div>
				</div>
			</section>
			<section id="section-5" class="page page5">
				<div class="wrapper">

					<figure class="page_item first totop">
						<figcaption class="page_item_caption ">1</figcaption>
					</figure>
					<figure class="page_item second toright">
						<figcaption class="page_item_caption">2</figcaption>
					</figure>
					<figure class="page_item third toleft">
						<figcaption class="page_item_caption">3</figcaption>
					</figure>

					<figure class="page_item fourth tobottom">
						<figcaption class="page_item_caption">3</figcaption>
					</figure>

				</div>
			</section>
			<section id="section-6" class="page page6">
				<div class="wrapper">

					<figure class="page_item first totop">
						<figcaption class="page_item_caption ">1</figcaption>
					</figure>
					<figure class="page_item second toright">
						<figcaption class="page_item_caption">2</figcaption>
					</figure>
					<figure class="page_item third toleft">
						<figcaption class="page_item_caption">3</figcaption>
					</figure>

					<figure class="page_item fourth tobottom">
						<figcaption class="page_item_caption">3</figcaption>
					</figure>

				</div>

			</section>
		</div>
	</div>
</div>

<script>
	$(document).ready(function($) {

		var controller;
		if (Modernizr.touch) {
			var myScroll;
 
			$(document).ready(function () {
				// wrap for iscroll
				$("#content-wrapper")
						.addClass("scrollContainer")
						.wrapInner('<div class="scrollContent"></div>');

				// add iScroll
				myScroll = new IScroll('#content-wrapper', {scrollX: false, scrollY: true, scrollbars: false, useTransform: true, useTransition: true, probeType: 3});

				// update container on scroll
				myScroll.on("scroll", function () {
					controller.update();
				});

				// overwrite scroll position calculation to use child's offset instead of parents scrollTop();
				controller.scrollPos(function () {
					return -myScroll.y;
				});

				// refresh height, so all is included.
				setTimeout(function () {
					myScroll.refresh();
				}, 0);

				$("#content-wrapper").on("touchend", "a", function (e) {
					// a bit dirty workaround for links not working in iscroll for some reason...
					e.preventDefault();
					window.location.href = $(this).attr("href");
				});

				// manual set hight (so height 100% is available within scroll container)
				$(document).on("orientationchange", function () {
					$("section")
							.css("min-height", $(window).height())
							.parent(".scrollmagic-pin-spacer").css("min-height", $(window).height());
				});
				$(document).trigger("orientationchange"); // trigger to init
			});
			// init the controller
			controller = new ScrollMagic({
				container: "#content-wrapper",
				globalSceneOptions: {
					triggerHook: "onLeave"
				}
			});
		} else {
			// init the controller
			controller = new ScrollMagic({
				globalSceneOptions: {
					triggerHook: "onLeave"
				}
			});
		}



		// parallax1
			new ScrollScene({
				triggerElement: "section#section-1",
				duration: $(window).height(),
				offset: 0
			})
					.addTo(controller)
					.triggerHook("onLeave")
					.setTween(new TimelineMax().add([
						TweenMax.fromTo("#section-1 .wrapper", 1, {top: "0"}, {top: "20%", ease: Linear.easeNone}),


					]));

		// parallax2
			new ScrollScene({
				triggerElement: "section#section-2",
				duration: $(window).height(),
				offset: 0
			})
					.addTo(controller)
					.triggerHook("onLeave")
					.setTween(new TimelineMax().add([
						TweenMax.fromTo("#section-2 .wrapper", 1, {top: "0"}, {top: "20%", ease: Linear.easeNone}),


					]));
		// parallax3
			new ScrollScene({
				triggerElement: "section#section-3",
				duration: $(window).height(),
				offset: 0
			})
					.addTo(controller)
					.triggerHook("onLeave")
					.setTween(new TimelineMax().add([
//						TweenMax.fromTo("#section-3 .bg-section-1", 1, {top: "0"}, {top: "-40%", ease: Linear.easeNone}),
						TweenMax.fromTo("#section-3 .wrapper", 1, {top: "0"}, {top: "20%", ease: Linear.easeNone}),
//						TweenMax.to("#section-3", 1, {backgroundPosition: "50% -50%", ease: Linear.easeNone})

					]));

		// parallax4
			new ScrollScene({
				triggerElement: "section#section-4",
				duration: $(window).height(),
				offset: 0
			})
					.addTo(controller)
					.triggerHook("onLeave")
					.setTween(new TimelineMax().add([
						TweenMax.fromTo("#section-4 .wrapper", 1, {top: "0"}, {top: "20%", ease: Linear.easeNone}),
						TweenMax.fromTo("#section-4 .section-4-bg-1", 1, {top: "0"}, {top: "20%", ease: Linear.easeNone}),
						TweenMax.fromTo("#section-4 .section-4-bg-2", 1, {top: "0"}, {top: "40%", ease: Linear.easeNone}),
						TweenMax.fromTo("#section-4 .section-4-bg-3", 1, {top: "0"}, {top: "50%", ease: Linear.easeNone}),
						TweenMax.fromTo("#section-4 .section-4-bg-4", 1, {top: "0"}, {top: "70%", ease: Linear.easeNone}),


					]));

		// parallax5
			new ScrollScene({
				triggerElement: "section#section-5",
				duration: $(window).height(),
				offset: 0
			})
					.addTo(controller)
					.triggerHook("onLeave")
					.setTween(new TimelineMax().add([
						TweenMax.fromTo("#section-5 .wrapper", 1, {top: "0"}, {top: "20%", ease: Linear.easeNone}),


					]));


 	});
</script>
</body>
</html>