<!DOCTYPE html>
<html class="no-js" lang="ru">


<head>
	<meta charset="utf-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="viewport" content="initial-scale=.8,user-scalable=no,maximum-scale=.8,width=device-width"/>

	<title>СЛАДУНИЦА</title>

	<script type="text/javascript" src="js/modernizr.custom.13938-min.js"></script>



	<script type="text/javascript" src="js/_dependent/greensock/TweenMax.min.js"></script>
	<!--<script type="text/javascript" src="js/_dependent/greensock/plugins/ScrollToPlugin.min.js"></script>-->
	<script type="text/javascript" src="js/jquery.2.0.js"></script>
	<script type="text/javascript" src="js/jquery.scrollmagic.js"></script>
	<!--<script type="text/javascript" src="js/jquery.scrollmagic.debug.js"></script>-->
	<script type="text/javascript" src="js/jquery.scrollto.js"></script>
	<!--<script type="text/javascript" src="js/jquery.rotation.js"></script>-->
	<!--<script type="text/javascript" src="js/queryLoader.js"></script>-->
	<script type="text/javascript" src="js/jquery.easing.1.3.js"></script>
	<script type="text/javascript" src="js/jquery.jcarousel.js"></script>

	<script type="text/javascript" src="js/common.js"></script>


	<link rel="stylesheet" href="css/fontface.css" type="text/css"/>
	<link rel="stylesheet" href="css/company.css" type="text/css"/>


	<!-- Add fancyBox -->
	<link rel="stylesheet" href="img/fancybox/source/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
	<script type="text/javascript" src="img/fancybox/source/jquery.fancybox.js?v=2.1.5"></script>


	<!-- Optionally add helpers - button, thumbnail and/or media -->
	<link rel="stylesheet" href="img/fancybox/source/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen" />
	<script type="text/javascript" src="img/fancybox/source/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
	<script type="text/javascript" src="img/fancybox/source/helpers/jquery.fancybox-media.js?v=1.0.6"></script>

	<link rel="stylesheet" href="img/fancybox/source/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen" />
	<script type="text/javascript" src="img/fancybox/source/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<div id="content-wrapper">
	<div id="wrapper">



		<div class="scrollContent">

			<section id="section-3" class="company_page">

				<!-- third slide:begin -->
				<div class="third_slide">


				<div id="visualtour"  class="jcarousel">

					<ul  style="overflow: hidden">
						<li style="background-image: url(img/visualtour/01.jpg); background-size: cover;"></li>
						<li style="background-image: url(img/visualtour/02.jpg); background-size: cover;"></li>
						<li style="background-image: url(img/visualtour/03.jpg); background-size: cover;"></li>
						<li style="background-image: url(img/visualtour/04.jpg); background-size: cover;"></li>
						<li style="background-image: url(img/visualtour/05.jpg); background-size: cover;"></li>
						<li style="background-image: url(img/visualtour/06.jpg); background-size: cover;"></li>
						<li style="background-image: url(img/visualtour/07.jpg); background-size: cover;"></li>
						<li style="background-image: url(img/visualtour/08.jpg); background-size: cover;"></li>
					</ul>

					<div id="controls" style="margin-top: 	-123px; height: 123px; position: relative; z-index: 330; background: #720030">
						<em class="jcarousel-control-start" style="position: absolute; top: 40px; left: 0">pause</em>

						<div class="tour_control_wrapper">
							<div class="tour_control jcarousel-pagination"></div>

							<div id="vwev">
								<div class="tour_control jcarousel-pagination"></div>
							</div>
						</div>
					</div>





				</div>





			</section>
		</div>
	</div>
</div>
<script>
		$.fn.toggleClick = function(){
			var methods = arguments, // store the passed arguments for future reference
					count = methods.length; // cache the number of methods

			//use return this to maintain jQuery chainability
			return this.each(function(i, item){
				// for each element you bind to
				var index = 0; // create a local counter for that element
				$(item).click(function(){ // bind a click handler to that element
					return methods[index++ % count].apply(this,arguments); // that when called will apply the 'index'th method to that element
					// the index % count means that we constrain our iterator between 0 and (count-1)
				});
			});
		};


	$(document).ready(function ($) {


		animateBlock =  {

			el: $("#vwev"),
			animateDot: function(number) {

				$(".tour_control_item", this.el).eq(number).addClass("active");


			},
			set: function(index) {


			},
			shrinkBar: function (number) {



				var intervalWidth = 1000 / 8;
				var startWidth = intervalWidth * number;
				this.el.stop().animate({
					width: startWidth + "px"
				}, 200);



			},
			expandBar: function (number) {


				var intervalWidth = 1000 / 8;
				var startWidth = intervalWidth * (number + 1);
				this.el.stop().animate({
					width: (startWidth + intervalWidth) + "px"
				}, (36000 / 8), 'linear',
					function() {
						console.log("!!")
					}
				);



			},
			stopBar: function () {


				this.el.stop();



			}
		}


		$('#visualtour')
				.on('jcarousel:create jcarousel:reload', function() {
					var element = $(this),
							width = element.innerWidth();
					element.jcarousel('items').css('width', width + 'px');



					animateBlock.shrinkBar(0);


				})
				.jcarousel({
					// Your configurations options
				})
				.jcarouselAutoscroll({
					interval: 2000,
					target: '+=1',
					autostart: true
				})
				.on('jcarousel:animateend', function(event, carousel, target, animate) {





				});

		$('#visualtour .jcarousel-control-prev')
				.on('jcarouselcontrol:active', function() {
					$(this).removeClass('inactive');
				})
				.on('jcarouselcontrol:inactive', function() {
					$(this).addClass('inactive');
				})
				.jcarouselControl({
					target: '-=1'
				});

		$('#visualtour .jcarousel-control-next')
				.on('jcarouselcontrol:active', function() {
					$(this).removeClass('inactive');
				})
				.on('jcarouselcontrol:inactive', function() {
					$(this).addClass('inactive');
				})
				.jcarouselControl({
					target: '+=1'
				});

		$('#visualtour .jcarousel-control-start')
				.toggleClick(
				function() {

					$(this).html("start");
					$('.jcarousel').jcarouselAutoscroll('stop');
					animateBlock.stopBar();


				}, function() {
					$(this).html("stop");

					$('.jcarousel').jcarouselAutoscroll('start');
				}

			);

		$('#visualtour .jcarousel-pagination')
				.on('jcarouselpagination:active', 'div', function(a, b, c, d) {
					$(this).addClass('active')



					var _i = $('#vwev .tour_control_item').index($(this))

					if(_i != -1) {

						animateBlock.expandBar(_i);


					}



				})
				.on('jcarouselpagination:inactive', 'div', function() {
					$(this).removeClass('active');
				})
				.jcarouselPagination({
						item: function(page) {
 							return '<div class="tour_control_item"><em/></div>';
						},
						event:  'click',
						method: 'scroll'

				});

		$('#visualtour .jcarousel-pagination2')
				.on('jcarouselpagination:active', 'li', function() {
					$(this).addClass('active');

					var _i = $('#vwev .tour_control_item').index($(this))


					if (_i !== -1) {

						animateBlock.animate(_i);
					}
				})
				.on('jcarouselpagination:inactive', 'li', function() {
					$(this).removeClass('active');
				})
				.jcarouselPagination({
						item: function(page) {
 							return '<div class="tour_control_item"><em/></div>';
						},
						event:  'click',
						method: 'scroll'

				});



	});




</script>



</body>
</html>